<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WindBorne Application Dashboard</title>

  <link href="https://fonts.googleapis.com/css2?family=Inknut+Antiqua:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <link rel="stylesheet" href="../static/dashboard.css">
</head>

<body>
  <div id="dashboard">
        <div id="sidebar-left">
            <h2><i class="fa-solid fa-location-dot"></i> Balloon Info</h2>
        <div id="balloon-info">
            <p style="font-size: 1.2rem;">Select a balloon from the map to view details.</p>
        </div>
        <div id="project-info" style="font-size: 0.8rem;">
            <h3><i class="fa-solid fa-info-circle"></i> About This Project</h3>
            <p>This dashboard visualizes real-time balloon position data from the WindBorne Systems API, integrating meteorological data using an LSTM machine learning model to predict where each balloon will be in the next hour. Balloon positions update every 5 minutes, while weather data updates on a scheduled update due to API rate limits.</p>
            <h3>Project Build Information</h3>
            <p>The data pipeline and training was built using python which connects to Cloudflare R2. I built a Keras model using TensorFlow. This project uses a Flask and Gunicorn web service running on a Dockerized DigitialOcean Droplet with limited resources with robust fallback logic. I haven't used Docker before this project, and it pushed the limits of what I thought I was capable of building.</p>
            <p>Data Sources:</p>
            <ul>
            <li>Balloon Data: WindBorne Systems API</li>
            <li>Weather Data: Open-Meteo API</li>
            </ul>
            <p>Note: Weather data shown is from the most recent model training cycle and may not reflect current conditions</p>
            
        </div>
    </div>

    <!-- Map Container -->
    <div id="map"></div>

    <div id="sidebar-right">
        <h2><i class="fa-solid fa-brain"></i> Model Status</h2>
        <div id="model-info">
            <p><b>Model:</b> LSTM v1</p>
            <p><b>Features:</b> 3</p>
            <p><b>Last Updated:</b> <span id="last-update">—</span></p>
            <hr>

            <div id="metrics">
            <h3>Overall Performance</h3>
            <p><b>MSE:</b> <span id="overall-mse">—</span></p>
            <p><b>MAE:</b> <span id="overall-mae">—</span></p>
            <p><b>Corr:</b> <span id="overall-corr">—</span></p>

            <h3>Key Features</h3>
            <p><b>Latitude:</b> MSE <span id="lat-mse">—</span>, MAE <span id="lat-mae">—</span>, Corr <span id="lat-corr">—</span></p>
            <p><b>Longitude:</b> MSE <span id="lon-mse">—</span>, MAE <span id="lon-mae">—</span>, Corr <span id="lon-corr">—</span></p>
            <p><b>Altitude:</b> MSE <span id="alt-mse">—</span>, MAE <span id="alt-mae">—</span>, Corr <span id="alt-corr">—</span></p>
            </div>

            <hr>
            <div id="loss-plot">
            <h3>Loss Curve</h3>
            <img id="loss-curve-img" src="/static/loss_curve.png" alt="Loss Curve" width="100%">
            </div>
        </div>
    </div>

  </div>

  <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>

  <!-- Your dashboard JS -->
  <script src="../static/dashboard.js"></script>
</body>
</html>
